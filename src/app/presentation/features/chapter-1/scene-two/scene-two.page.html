<section class="scene-two">
  <div class="scene-two__container">
    <div class="scene-two__container__back-right-bush"></div>
    <div class="scene-two__container__back-left-bush"></div>
    <div class="scene-two__container__mom-cuy"></div>
    <div class="scene-two__container__son-cuy"></div>
    <div class="scene-two__container__cambuche"></div>
    <div class="scene-two__container__front-right-bush"></div>
    <div class="scene-two__container__front-left-bush"></div>
    <ng-container *ngIf="isSubtitles$ | async as isSubtitles">
      <div
        class="scene-two__container__subtitles"
        [ngClass]="{ on: isSubtitles && removeSubtitlesAnimation > 0 }"
      >
        <layout-subtitles [subtitles]="getSubtitles()"></layout-subtitles>
      </div>
    </ng-container>
    <div class="scene-two__container__arrows">
      <layout-inner-nav
        [showNextButton]="showNextButton"
        [showPreviousButton]="showPreviousButton"
        (goToNextPageEvent)="onGoToNextPage()"
        (goToPreviousPageEvent)="onGoToPreviousPage()"
      ></layout-inner-nav>
    </div>
    <div class="scene-two__container__footer">
      <layout-bar
        [currentRoute]="currentRoute"
        (goToNextPageEvent)="onGoToNextPage()"
        (goToPreviousPageEvent)="onGoToPreviousPage()"
        (goToConfigurationEvent)="onGoToConfiguration()"
        (goToBackpackEvent)="onGoToBackpack()"
        (repeatSceneEvent)="onRepeatScene()"
        (openScenesListEvent)="onOpenScenesList()"
      ></layout-bar>
    </div>
    <audio #cap1Esc2Narrator>
      <source [src]="CONST.AUDIO.NARRATOR_CHAPTER_1_SCENE_2" type="audio/wav" />
    </audio>
  </div>
</section>

<ng-template #backpackChapter1>
  <layout-backpack
    [food]="chapterTwoFinished$ | async"
    [river]="chapterThreeFinished$ | async"
    [sun]="chapterFourFinished$ | async"
    (closeBackpackEvent)="onCloseBackpack()"
  ></layout-backpack>
</ng-template>

<ng-template #scenesList>
  <layout-scenes-list
    (closeScenesListEvent)="onCloseScenesList()"
  ></layout-scenes-list>
</ng-template>

<ng-template #config>
  <layout-configuration
    [isSubtitlesToggled]="isSubtitles$ | async"
    [isSoundToggled]="isSound$ | async"
    (closeConfigEvent)="onCloseConfig()"
    (soundToggleEvent)="onSoundToggle($event)"
    (subtitlesToggleEvent)="onSubtitlesToggle($event)"
  ></layout-configuration>
</ng-template>
